# PLUMED metadynamics input — generated by md_agent
# DO NOT EDIT manually; regenerate via PlumedGenerator

# ── Collective Variables ──────────────────────────────────────────────
{% for cv in cvs %}
{% if cv.type == "DISTANCE" %}
{{ cv.name }}: DISTANCE ATOMS={{ cv.atoms | join(",") }}
{% elif cv.type == "TORSION" %}
{{ cv.name }}: TORSION ATOMS={{ cv.atoms | join(",") }}
{% elif cv.type == "ANGLE" %}
{{ cv.name }}: ANGLE ATOMS={{ cv.atoms | join(",") }}
{% elif cv.type == "RMSD" %}
{{ cv.name }}: RMSD REFERENCE={{ cv.reference }} TYPE={{ cv.rmsd_type | default("OPTIMAL") }}
{% elif cv.type == "COORDINATION" %}
{{ cv.name }}: COORDINATION GROUPA={{ cv.groupa | join(",") }} GROUPB={{ cv.groupb | join(",") }} R_0={{ cv.r0 | default(0.5) }}
{% else %}
# WARNING: Unknown CV type {{ cv.type }} for {{ cv.name }} — add manually
{{ cv.name }}: {{ cv.type }}{% if cv.atoms %} ATOMS={{ cv.atoms | join(",") }}{% endif %}
{% endif %}
{% endfor %}

# ── Output ───────────────────────────────────────────────────────────
PRINT ARG={{ cv_names }} STRIDE={{ colvar_stride }} FILE={{ colvar_file }}
FLUSH STRIDE={{ colvar_stride }}

# ── Metadynamics Bias ─────────────────────────────────────────────────
METAD ...
  ARG={{ cv_names }}
  HEIGHT={{ hills_height }}
  SIGMA={{ hills_sigma | join(",") }}
  PACE={{ hills_pace }}
  FILE={{ hills_file }}
{% if biasfactor is not none %}
  BIASFACTOR={{ biasfactor }}
  TEMP={{ temperature }}
{% endif %}
  LABEL=metad
... METAD
