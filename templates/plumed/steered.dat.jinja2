# PLUMED steered MD input — generated by md_agent
# Pulling {{ cv.name }} from {{ initial_value }} to {{ final_value }} over {{ total_steps }} steps
# Rate: {{ "%.6f" | format(rate) }} per step

# ── Collective Variable ───────────────────────────────────────────────
{% if cv.type == "DISTANCE" %}
{{ cv.name }}: DISTANCE ATOMS={{ cv.atoms | join(",") }}
{% elif cv.type == "TORSION" %}
{{ cv.name }}: TORSION ATOMS={{ cv.atoms | join(",") }}
{% elif cv.type == "ANGLE" %}
{{ cv.name }}: ANGLE ATOMS={{ cv.atoms | join(",") }}
{% elif cv.type == "RMSD" %}
{{ cv.name }}: RMSD REFERENCE={{ cv.reference }} TYPE={{ cv.rmsd_type | default("OPTIMAL") }}
{% else %}
{{ cv.name }}: {{ cv.type }}{% if cv.atoms %} ATOMS={{ cv.atoms | join(",") }}{% endif %}
{% endif %}

# ── Moving Restraint ──────────────────────────────────────────────────
movingrestraint: MOVINGRESTRAINT ...
  ARG={{ cv.name }}
  STEP0=0 AT0={{ initial_value }} KAPPA0={{ force_constant }}
  STEP1={{ total_steps }} AT1={{ final_value }} KAPPA1={{ force_constant }}
... MOVINGRESTRAINT

# ── Output ───────────────────────────────────────────────────────────
PRINT ARG={{ cv.name }},movingrestraint.bias,movingrestraint.force2 STRIDE={{ colvar_stride }} FILE={{ colvar_file }}
FLUSH STRIDE={{ colvar_stride }}
